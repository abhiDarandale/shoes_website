<%- include("navbar.ejs") %>

<div class="container-fluid mt-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Product List / Management</h2>
    <a href="/admin/add_product" class="btn btn-dark btn-sm">
      <i class="bi bi-plus-lg"></i> Add Product
    </a>
  </div>

  <div class="table-responsive" style="max-height: 75vh; overflow-y: auto;">
    <table class="table table-bordered table-hover text-center align-middle">
      <thead class="table-light sticky-top">
        <tr>
          <th width="40px">Sr.No</th>
          <th width="120px">Image</th>
          <th width="180px">Name</th>
          <th width="100px">Market Price</th>
          <th width="100px">Discount</th>
          <th width="100px">Net Price</th>
          <th width="80px">Trending</th>
          <th width="120px">Brand</th>
          <th width="100px">Style</th>
          <th width="80px">For</th>
          <th width="100px">Kid Type</th>
          <th width="120px">Type</th>
          <th width="80px">Stock</th>
          <th width="100px">Color</th>
          <th width="150px">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% product.forEach((item, index) => { %>
        <tr>
          <td><%= index + 1 %></td>
          <td class="p-1">
            <img src="/products/<%= item.product_main_image %>" 
                 class="img-thumbnail" 
                 style="width: 100px; height: 100px; object-fit: contain;"
                 alt="<%= item.product_name %>">
          </td>
          <td><%= item.product_name %></td>
          <td>₹<%= item.product_market_price %></td>
          <td><%= item.apply_discount_percent %>%</td>
          <td>₹<%= item.product_price %></td>
          <td><%= item.product_is_trending %></td>
          <td><%= item.product_brand_name %></td>
          <td><%= item.product_style_name %></td>
          <td><%= item.product_for %></td>
          <td><%= item.product_kid_type || '-' %></td>
          <td><%= item.product_type_name %></td>
          <td><%= item.product_stock %></td>
          <td><%= item.product_color %></td>
          <td>
            <div class="d-flex flex-column gap-2">
              <a href="/admin/edit_product/<%= item.product_id %>" 
                 class="btn btn-sm text-dark border-dark">
                <i class="bi bi-pencil"></i> Edit
              </a>
              <a href="/admin/delete_product/<%= item.product_id %>" 
                 class="btn btn-sm text-danger border-danger">
                <i class="bi bi-trash"></i> Delete
              </a>
            </div>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<%- include("footer.ejs") %>

<style>
  .table th {
    position: sticky;
    top: 0;
    background-color: #f8f9fa;
    z-index: 10;
  }
  .table td {
    vertical-align: middle;
  }
  .img-thumbnail {
    padding: 0.25rem;
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
  }
</style>